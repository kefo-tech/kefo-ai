<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ù…Ù†ØµØ© Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø¹Ù„Ù…ÙŠ - ÙˆØ§Ø¬Ù‡Ø© Ø¯Ø±Ø¯Ø´Ø© ØªÙ‚Ù†ÙŠØ©</title>

  <style>
    *, *::before, *::after { box-sizing: border-box; }

    :root{
      --bg: #000;
      --text: #0f0;
      --panel: rgba(0,0,0,0.85);
      --panel2: rgba(0,0,0,0.9);
      --border: #0f0;
      --bubble: rgba(0,128,0,0.2);
      --bubble-user: rgba(0,255,0,0.3);
      --shadow: 0 0 20px var(--border);
      --muted: rgba(0,255,0,0.75);
      --btn-bg: #000;
      --btn-text: #0f0;
      --btn-hover-bg: #0f0;
      --btn-hover-text: #000;
    }

    /* ÙˆØ¶Ø¹ Ù†Ù‡Ø§Ø±ÙŠ */
    body.theme-light{
      --bg: #f6f7fb;
      --text: #0b3d0b;
      --panel: rgba(255,255,255,0.9);
      --panel2: rgba(255,255,255,0.95);
      --border: #0b3d0b;
      --bubble: rgba(11,61,11,0.08);
      --bubble-user: rgba(11,61,11,0.12);
      --shadow: 0 8px 24px rgba(0,0,0,0.12);
      --muted: rgba(11,61,11,0.75);
      --btn-bg: #ffffff;
      --btn-text: #0b3d0b;
      --btn-hover-bg: #0b3d0b;
      --btn-hover-text: #ffffff;
    }

    body {
      font-family: 'Courier New', Courier, monospace;
      background: var(--bg);
      color: var(--text);
      margin: 0;
      padding: 0;
      user-select: none;
      min-height: 100vh;
      display: flex;
      justify-content: center;
    }

    /* Ø¥Ø·Ø§Ø± Ø¹Ø§Ù… */
    .app {
      width: 100%;
      max-width: 680px;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      padding: 10px;
    }

    /* Ù‡ÙŠØ¯Ø± Ø«Ø§Ø¨Øª Ø£Ø¹Ù„Ù‰ */
    .header {
      position: sticky;
      top: 0;
      z-index: 50;
      background: var(--panel2);
      border: 1px solid var(--border);
      border-radius: 12px;
      box-shadow: var(--shadow);
      padding: 10px 12px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
    }

    .header h1{
      margin: 0;
      font-size: 1.25rem;
      text-shadow: 0 0 10px var(--border), 0 0 20px var(--border);
      line-height: 1.2;
    }

    .header-actions{
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .icon-btn{
      background: var(--btn-bg);
      color: var(--btn-text);
      border: 1px solid var(--border);
      width: 40px;
      height: 40px;
      border-radius: 10px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 10px rgba(0,255,0,0.15);
      transition: transform 0.12s ease, background 0.12s ease, color 0.12s ease;
      font-size: 18px;
    }
    .icon-btn:hover{
      background: var(--btn-hover-bg);
      color: var(--btn-hover-text);
      transform: scale(1.05);
    }

    /* Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª */
    .settings-drawer{
      position: fixed;
      inset: 0;
      z-index: 100;
      display: none;
    }
    .settings-drawer.open{ display: block; }

    .settings-backdrop{
      position: absolute;
      inset: 0;
      background: rgba(0,0,0,0.55);
    }

    .settings-panel{
      position: absolute;
      top: 12px;
      left: 12px;
      right: 12px;
      max-width: 680px;
      margin: 0 auto;
      background: var(--panel2);
      border: 1px solid var(--border);
      border-radius: 14px;
      box-shadow: var(--shadow);
      padding: 12px;
    }

    .settings-panel h2{
      margin: 0 0 10px 0;
      font-size: 1.05rem;
      color: var(--text);
    }

    .setting-row{
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      padding: 10px;
      border: 1px dashed var(--border);
      border-radius: 12px;
      background: var(--panel);
    }

    .setting-row .label{
      color: var(--text);
      opacity: 0.95;
      font-size: 0.95rem;
    }

    .toggle{
      display: inline-flex;
      gap: 8px;
      align-items: center;
      cursor: pointer;
      user-select: none;
    }

    .toggle input{ display:none; }

    .toggle-pill{
      width: 54px;
      height: 30px;
      border-radius: 99px;
      border: 1px solid var(--border);
      background: var(--btn-bg);
      position: relative;
      transition: background 0.2s ease;
    }

    .toggle-pill::after{
      content: "";
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: var(--border);
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      right: 3px;
      transition: right 0.2s ease;
      box-shadow: 0 0 10px rgba(0,255,0,0.25);
    }

    body.theme-light .toggle-pill::after{
      box-shadow: 0 0 10px rgba(11,61,11,0.25);
    }

    .toggle input:checked + .toggle-pill::after{
      right: 27px; /* RTL: ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ù„Ù„ÙŠØ³Ø§Ø± Ø¨ØµØ±ÙŠØ§Ù‹ */
    }

    .settings-footer{
      display: flex;
      justify-content: flex-end;
      padding-top: 10px;
    }

    .btn{
      background: var(--btn-bg);
      color: var(--btn-text);
      border: 1px solid var(--border);
      padding: 10px 14px;
      border-radius: 10px;
      cursor: pointer;
      transition: transform 0.12s ease, background 0.12s ease, color 0.12s ease;
      font-size: 14px;
    }
    .btn:hover{
      background: var(--btn-hover-bg);
      color: var(--btn-hover-text);
      transform: scale(1.03);
    }

    /* Ø¬Ø³Ù… Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© */
    #chat-container {
      margin-top: 10px;
      border: 1px solid var(--border);
      background: var(--panel);
      border-radius: 12px;
      box-shadow: var(--shadow);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      flex: 1;
      min-height: 0; /* Ù…Ù‡Ù… Ù„Ù„ØªÙ…Ø±ÙŠØ± */
    }

    #conversation {
      padding: 12px;
      background: var(--panel2);
      direction: rtl;
      overflow-y: auto;
      flex: 1;
      min-height: 0;
      scroll-behavior: smooth;
    }

    .message-bubble {
      background: var(--bubble);
      color: var(--text);
      padding: 10px;
      border: 1px solid var(--border);
      border-radius: 10px;
      margin: 10px 0;
      max-width: 92%;
      word-wrap: break-word;
      line-height: 1.6;
    }

    .user-bubble {
      margin-right: auto; /* RTL: ÙÙ‚Ø§Ø¹Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¥Ù„Ù‰ Ø§Ù„ÙŠØ³Ø§Ø± Ø¨ØµØ±ÙŠØ§Ù‹ */
      background: var(--bubble-user);
    }

    .article-container {
      padding: 14px;
      background: rgba(0, 128, 0, 0.08);
      border: 1px solid var(--border);
      border-radius: 12px;
      margin: 12px 0;
    }
    body.theme-light .article-container{
      background: rgba(11,61,11,0.06);
    }

    .signature {
      margin-top: 8px;
      font-size: 14px;
      color: var(--muted);
      text-align: left; /* RTL: Ø§Ù„ØªÙˆÙ‚ÙŠØ¹ ÙŠØ¸Ù‡Ø± ÙŠÙ…ÙŠÙ†Ø§Ù‹/ÙŠØ³Ø§Ø±Ø§Ù‹ Ø­Ø³Ø¨ Ø±ØºØ¨ØªÙƒ */
      font-style: italic;
    }

    .typing-effect {
      display: inline-block;
      white-space: pre-wrap;
      font-family: 'Courier New', Courier, monospace;
    }

    .copy-btn {
      background: var(--btn-bg);
      color: var(--btn-text);
      border: 1px solid var(--border);
      padding: 9px 14px;
      font-size: 14px;
      cursor: pointer;
      border-radius: 10px;
      margin-top: 12px;
      display: inline-block;
      transition: transform 0.12s ease, background 0.12s ease, color 0.12s ease;
    }
    .copy-btn:hover {
      background: var(--btn-hover-bg);
      color: var(--btn-hover-text);
      transform: scale(1.03);
    }

    /* Ø´Ø±ÙŠØ· Ø¥Ø¯Ø®Ø§Ù„ Ø«Ø§Ø¨Øª Ø£Ø³ÙÙ„ */
    #input-container {
      position: sticky;
      bottom: 0;
      z-index: 40;
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px;
      background: var(--panel2);
      border-top: 1px solid var(--border);
      flex-wrap: nowrap;
    }

    #userInput {
      flex: 1;
      padding: 12px;
      font-size: 16px;
      border: 1px solid var(--border);
      border-radius: 10px;
      background: var(--btn-bg);
      color: var(--btn-text);
      caret-color: var(--border);
      box-shadow: 0 0 10px rgba(0,255,0,0.15);
      outline: none;
    }
    body.theme-light #userInput{
      box-shadow: 0 0 10px rgba(11,61,11,0.12);
    }

    #sendBtn {
      background: var(--btn-bg);
      color: var(--btn-text);
      border: 1px solid var(--border);
      padding: 12px 18px;
      font-size: 16px;
      cursor: pointer;
      border-radius: 10px;
      white-space: nowrap;
      transition: transform 0.12s ease, background 0.12s ease, color 0.12s ease;
    }
    #sendBtn:hover {
      background: var(--btn-hover-bg);
      color: var(--btn-hover-text);
      transform: scale(1.03);
    }

    .notification {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: var(--border);
      color: var(--btn-hover-text);
      padding: 10px 14px;
      border-radius: 12px;
      font-weight: bold;
      box-shadow: var(--shadow);
      z-index: 200;
      transition: opacity 0.5s ease-in-out;
      max-width: calc(100% - 40px);
    }

    @media (max-width: 600px) {
      .app{ padding: 8px; }
      .header h1 { font-size: 1.05rem; }
      #sendBtn { padding: 12px 14px; font-size: 15px; }
      .message-bubble { max-width: 100%; font-size: 14px; }
    }
  </style>
</head>

<body>
  <div class="app">
    <div class="header">
      <h1>Ù…Ù†ØµØ© Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø¹Ù„Ù…ÙŠ</h1>
      <div class="header-actions">
        <button class="icon-btn" id="settingsBtn" title="Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª" aria-label="Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª">âš™ï¸</button>
      </div>
    </div>

    <audio id="background-music" preload="none" controls style="display:none">
      <source src="https://assets.mixkit.co/active_storage/sfx/2467/2467-preview.mp3" type="audio/mpeg" />
    </audio>

    <div id="chat-container">
      <div id="conversation"></div>
      <div id="input-container">
        <input type="text" id="userInput" placeholder="Ø§ÙƒØªØ¨ ÙƒÙ„Ù…Ø© Ø£Ùˆ Ø¬Ù…Ù„Ø© Ù„Ù„Ø¨Ø­Ø«" />
        <button id="sendBtn">Ø¨Ø­Ø«</button>
      </div>
    </div>
  </div>

  <!-- Settings Drawer -->
  <div class="settings-drawer" id="settingsDrawer" aria-hidden="true">
    <div class="settings-backdrop" id="settingsBackdrop"></div>
    <div class="settings-panel" role="dialog" aria-modal="true" aria-label="Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª">
      <h2>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h2>

      <div class="setting-row">
        <div class="label">Ø§Ù„ÙˆØ¶Ø¹</div>
        <label class="toggle" title="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ù„ÙŠÙ„ÙŠ/Ù†Ù‡Ø§Ø±ÙŠ">
          <input type="checkbox" id="themeToggle" />
          <span class="toggle-pill"></span>
          <span id="themeLabel">Ù„ÙŠÙ„ÙŠ</span>
        </label>
      </div>

      <div class="settings-footer">
        <button class="btn" id="closeSettingsBtn">Ø¥ØºÙ„Ø§Ù‚</button>
      </div>
    </div>
  </div>

  <script>
    let isMusicPlayed = false;
    let currentSearchResults = [];

    const conversationContainer = document.getElementById('conversation');
    const userInput = document.getElementById('userInput');
    const sendBtn = document.getElementById('sendBtn');

    // =========================
    // Auto-scroll (Ù…Ù‡Ù… Ø¬Ø¯Ø§Ù‹)
    // =========================
    function scrollToBottom(smooth = true) {
      // Ø§Ø³ØªÙ‡Ø¯Ø§Ù Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¨Ø´ÙƒÙ„ Ù…ÙˆØ«ÙˆÙ‚
      const behavior = smooth ? 'smooth' : 'auto';
      conversationContainer.scrollTo({ top: conversationContainer.scrollHeight, behavior });
    }

    // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø£ÙŠ Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù€ DOM Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© ÙˆØ§Ù„ØªÙ…Ø±ÙŠØ± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
    const observer = new MutationObserver(() => scrollToBottom(true));
    observer.observe(conversationContainer, { childList: true, subtree: true });

    // =========================
    // Theme (Ù„ÙŠÙ„ÙŠ/Ù†Ù‡Ø§Ø±ÙŠ) + Ø­ÙØ¸
    // =========================
    const themeToggle = document.getElementById('themeToggle');
    const themeLabel = document.getElementById('themeLabel');

    function applyTheme(theme) {
      const isLight = theme === 'light';
      document.body.classList.toggle('theme-light', isLight);
      themeToggle.checked = isLight;
      themeLabel.textContent = isLight ? 'Ù†Ù‡Ø§Ø±ÙŠ' : 'Ù„ÙŠÙ„ÙŠ';
      localStorage.setItem('kefotube_science_theme', theme);
    }

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø«ÙŠÙ… Ø§Ù„Ù…Ø­ÙÙˆØ¸
    (function initTheme(){
      const saved = localStorage.getItem('kefotube_science_theme') || 'dark';
      applyTheme(saved);
    })();

    themeToggle.addEventListener('change', () => {
      applyTheme(themeToggle.checked ? 'light' : 'dark');
    });

    // =========================
    // Settings drawer
    // =========================
    const settingsBtn = document.getElementById('settingsBtn');
    const settingsDrawer = document.getElementById('settingsDrawer');
    const settingsBackdrop = document.getElementById('settingsBackdrop');
    const closeSettingsBtn = document.getElementById('closeSettingsBtn');

    function openSettings(){
      settingsDrawer.classList.add('open');
      settingsDrawer.setAttribute('aria-hidden', 'false');
    }
    function closeSettings(){
      settingsDrawer.classList.remove('open');
      settingsDrawer.setAttribute('aria-hidden', 'true');
    }

    settingsBtn.addEventListener('click', openSettings);
    closeSettingsBtn.addEventListener('click', closeSettings);
    settingsBackdrop.addEventListener('click', closeSettings);
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeSettings();
    });

    // =========================
    // Wikipedia search
    // =========================
    async function searchWikipedia() {
      const searchTerm = userInput.value.trim();
      if (!searchTerm) {
        showCopyNotification("â— ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© ÙƒÙ„Ù…Ø© Ù„Ù„Ø¨Ø­Ø«");
        return;
      }

      if (!isMusicPlayed) {
        const audio = document.getElementById('background-music');
        audio.play().catch(() => { /* ØªØ¬Ø§Ù‡Ù„ Ù‚ÙŠÙˆØ¯ Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ */ });
        isMusicPlayed = true;
      }

      addMessageToConversation(searchTerm, true);
      addMessageToConversation("Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«...", false);

      const apiUrl = `https://ar.wikipedia.org/w/api.php?action=query&format=json&list=search&srsearch=${encodeURIComponent(searchTerm)}&origin=*`;

      try {
        const response = await fetch(apiUrl);
        const data = await response.json();
        displaySearchResults(data.query.search, searchTerm);
      } catch (error) {
        console.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¨Ø­Ø«:", error);
        addMessageToConversation("âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø¨Ø­Ø«ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ù‹Ø§.", false);
      } finally {
        userInput.value = '';
        userInput.focus();
      }
    }

    function displaySearchResults(results, searchTerm) {
      if (!results || results.length === 0) {
        addMessageToConversation(`Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù„ÙƒÙ„Ù…Ø©: "${searchTerm}"`, false);
        return;
      }

      currentSearchResults = results;
      addMessageToConversation("ğŸ“„ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« (Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø´Ø±Ø­):", false);

      results.slice(0, 10).forEach((result, index) => {
        const resultDiv = document.createElement('div');
        resultDiv.className = 'message-bubble';
        resultDiv.textContent = `${index + 1}. ${result.title}`;
        resultDiv.style.cursor = 'pointer';
        resultDiv.title = 'Ø§Ø¶ØºØ· Ù„Ø¬Ù„Ø¨ Ø§Ù„Ø´Ø±Ø­';
        resultDiv.onclick = () => fetchFullArticle(result.title);
        conversationContainer.appendChild(resultDiv);
      });

      scrollToBottom(true);
    }

    async function fetchFullArticle(title) {
      addMessageToConversation("ğŸ”„ Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø´Ø±Ø­...", false);

      const apiUrl = `https://ar.wikipedia.org/w/api.php?action=query&format=json&prop=extracts&exintro&explaintext&titles=${encodeURIComponent(title)}&origin=*`;

      try {
        const response = await fetch(apiUrl);
        const data = await response.json();
        const page = Object.values(data.query.pages)[0];
        let extract = page.extract || "Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø´Ø±Ø­.";

        const articleContainer = document.createElement('div');
        articleContainer.className = 'article-container';

        const typingEffectDiv = document.createElement('div');
        typingEffectDiv.className = 'typing-effect';
        articleContainer.appendChild(typingEffectDiv);

        // ØªØ£Ø«ÙŠØ± ÙƒØªØ§Ø¨Ø© Ù…Ø­Ø³Ù‘Ù†: Ø­Ø±ÙÙŠØ§Ù‹/ÙƒÙ„Ù…Ø© Ù…Ø¹ ØªÙ…Ø±ÙŠØ± Ù…Ø³ØªÙ…Ø±
        let i = 0;
        const speed = 18; // Ø£Ø³Ø±Ø¹ Ù…Ù† Ø§Ù„Ø³Ø§Ø¨Ù‚ Ù„ØªØ¬Ø±Ø¨Ø© Ø£ÙØ¶Ù„
        function typeWriter() {
          if (i < extract.length) {
            typingEffectDiv.textContent += extract.charAt(i);
            i++;
            scrollToBottom(false); // Ø¨Ø¯ÙˆÙ† Ø³Ù„Ø§Ø³Ø© Ù„ØªÙØ§Ø¯ÙŠ "Ø§Ù‡ØªØ²Ø§Ø²" Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ÙƒØªØ§Ø¨Ø©
            setTimeout(typeWriter, speed);
          } else {
            const signature = document.createElement('div');
            signature.className = 'signature';
            signature.textContent = "Ø¨Ù‚Ù„Ù… Ø²ÙƒØ±ÙŠØ§ ÙƒÙŠÙÙˆ";
            articleContainer.appendChild(signature);

            const copyBtn = document.createElement('button');
            copyBtn.className = 'copy-btn';
            copyBtn.textContent = "Ù†Ø³Ø® Ø§Ù„Ù†ØªÙŠØ¬Ø©";
            copyBtn.onclick = () => copyToClipboard(extract + "\nØ¨Ù‚Ù„Ù… Ø²ÙƒØ±ÙŠØ§ ÙƒÙŠÙÙˆ");
            articleContainer.appendChild(copyBtn);

            scrollToBottom(true);
          }
        }

        typeWriter();
        conversationContainer.appendChild(articleContainer);
        scrollToBottom(true);
      } catch (error) {
        console.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù„Ø¨ Ø§Ù„Ø´Ø±Ø­:", error);
        addMessageToConversation("âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù„Ø¨ Ø§Ù„Ø´Ø±Ø­ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ù‹Ø§.", false);
      }
    }

    function addMessageToConversation(message, isUser = false) {
      const messageDiv = document.createElement('div');
      messageDiv.className = `message-bubble ${isUser ? 'user-bubble' : ''}`;
      messageDiv.textContent = message;
      conversationContainer.appendChild(messageDiv);
      scrollToBottom(true);
    }

    function copyToClipboard(text) {
      navigator.clipboard.writeText(text)
        .then(() => { showCopyNotification("âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù†Øµ!"); })
        .catch(err => {
          console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù†Ø³Ø®:', err);
          showCopyNotification("âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ù†Ø³Ø®!");
        });
    }

    function showCopyNotification(message) {
      const notification = document.createElement('div');
      notification.className = 'notification';
      notification.textContent = message;
      document.body.appendChild(notification);

      setTimeout(() => {
        notification.style.opacity = '0';
        setTimeout(() => { notification.remove(); }, 500);
      }, 2000);
    }

    // =========================
    // Events: Ø²Ø± Ø§Ù„Ø¨Ø­Ø« + Enter
    // =========================
    sendBtn.addEventListener('click', searchWikipedia);
    userInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') searchWikipedia();
    });

    // =========================
    // Ù…Ù†Ø¹ Ø§Ù„Ù†Ø³Ø® (ÙƒÙ…Ø§ Ø·Ù„Ø¨Øª Ø³Ø§Ø¨Ù‚Ø§Ù‹)
    // =========================
    document.addEventListener("contextmenu", e => e.preventDefault());
    document.addEventListener("selectstart", e => e.preventDefault());
    document.addEventListener("touchstart", e => {
      if (e.touches.length > 1) e.preventDefault();
    }, { passive: false });

    // Ø¨Ø¯Ø§ÙŠØ©: Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨
    addMessageToConversation("Ø§ÙƒØªØ¨ ÙƒÙ„Ù…Ø© Ø£Ùˆ Ù…ØµØ·Ù„Ø­Ø§Ù‹ Ø¹Ù„Ù…ÙŠØ§Ù‹ ÙˆØ³Ø£Ø¹Ø±Ø¶ Ù„Ùƒ Ù†ØªØ§Ø¦Ø¬ ÙˆÙŠÙƒÙŠØ¨ÙŠØ¯ÙŠØ§ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©.", false);
  </script>
</body>
</html>
